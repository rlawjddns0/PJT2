# Lidar로 Grid map 그리기

sub3 내용 간단 요약(아직 이해 안됨)



카메라만으로 거리정보까지 정확히 구하기는 힘들기 때문에 Landmark/Feature 로 맵을 만들어내는게 아니라 라이다 센서를 이용하는 Grid map을 만들 것이다.



grid map의 grid cell은 서로 독립적이며, 0과 1 사이의 확률변수로 가정한다.

cell의 좌표에 해당되는 위치에 벽 등의 물체가 있으면 occupied space일 확률이 1이라는 뜻에서 1로 채우고, 2d 라이다의 레이저가 지나간 곳은 빈 공간이므로 0이 채워진다. 그리고 레이저가 넘어가지 못한 공간은 unknown이라는 뜻으로 0.5라고 쓴다. (벽 뒤 등 레이저가 닿지 못한 범위)



### Bresenham algorithm

occupied cell과 free cell을 Bresenham 선 그리기 알고리즘을 사용하여 채워 넣는다.

Bresenham 선 그리기 알고리즘은 마킹된 현재 픽셀로부터 다음 픽셀을 어떻게 선택할지 결정하는 알고리즘

https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&blogId=ndb796&logNo=221115220322



### Particle Filter

칼만 필터는 선형모델을 가정하여 비선형성이 강한 시스템에 적용하기 어려움

파티클 필터는 정규분포가 아닌 노이즈나 기존 상태, 측정치 등에 대한 확률 정보가 없을 때에도 사용할 수 있음

monte carlo localization => 파티클 필터 기반의 위치추정 알고리즘



1)

파티클 필터는 importance sampling을 통해 정규분포가 아닌 분포에서 샘플링이 가능하다.

예측 모델로는 **particle motion model**을 사용한다.

2)

파티클 가중치는 다음과 같이 구한다.

- 2차원 라이다 포인트는 벽에 부딪혔을 때 찍히는 경우가 일반적이다.
- 따라서 라이다 포인트의 위치 ~= 맵 상에서 벽의 위치 라고 할 수 있다.
- 각 파티클 pose를 중심으로 맵 위에 그려서 벽과 매칭을 시키는 방식으로 접근한다.
- 맵 위에 그린 라이다 포인트가 벽에 매칭이 많이 되는 개수를 세서 파티클의 가중치로 정한다.

3)

리샘플링은 구현이 간단하다. 추첨용 원판처럼 가중치별로 구역의 크기가 다른 원판을 만들어 n번 회전하여 추첨하면 가중치가 높은 파티클이 더 자주 추첨되어 리샘플링이 된다고 한다. 해봐야 알겠다.



